search:
  message:
    intent:
      $ref: "./tag-group.yaml#/intent"

on_search:
  message:
    catalog:
      providers:
        items: &items
          $ref: "./tag-group.yaml#/items"
        fulfillments: &fulfillments
          $ref: "./tag-group.yaml#/fulfillments"
      tags: &BPP_TERMS
        $ref:  "./tag-group.yaml#/BPP_TERMS"

select:
  message:
    order:
      tags: &BAP_TERMS
        $ref:  "./tag-group.yaml#/BAP_TERMS"

on_select:
  message:
    order:
      items: *items
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/0"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/3"
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/0"
      tags: *BPP_TERMS

init:
  message:
    order:
      tags: *BAP_TERMS
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/6"

on_init:
  message:
    order:
      items: *items
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/0"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/3"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/6"
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/0"
      tags: *BPP_TERMS


confirm:
  message:
    order:
      tags: &BAP_BPP_TERMS
        -  $ref: "./tag-group.yaml#/BAP_TERMS/0"
        -  $ref: "./tag-group.yaml#/BPP_TERMS/0"
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/6"

on_confirm:
  message:
    order:
      items: *items
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/0"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/3"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/6"
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/0"
      tags: *BAP_BPP_TERMS

on_status:
  message:
    order:
      items: *items
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/1"
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/1"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/2"
      tags: *BAP_BPP_TERMS

update:
  message:
    order:
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/0"
          - $ref: "./tag-group.yaml#/order/payments/tags/1"
          - $ref: "./tag-group.yaml#/order/payments/tags/3"

on_update:
  message:
    order:
      items: *items
      payments:
        tags:
          - $ref: "./tag-group.yaml#/order/payments/tags/0"
          - $ref: "./tag-group.yaml#/order/payments/tags/1"
          - $ref: "./tag-group.yaml#/order/payments/tags/3"
      fulfillments:
        tags:
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/1"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/2"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/4"
          - $ref: "./tag-group.yaml#/order/fulfillments/tags/5"
      tags: *BAP_BPP_TERMS    
